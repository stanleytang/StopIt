{% extends "base.html" %}

{% block body %}
<div data-role="page" data-add-back-btn="true" id="route_page">
  <div data-role="header" data-theme="b">
	  <h1>StopIt</h1>
	  <a href="/" data-icon="home" class="ui-btn-right" data-direction="reverse">
	    Home
	  </a>
	</div>
  
  <div data-role="content">
		<fieldset class="ui-grid-a">
			<div class="ui-block-a">
			  <h3>{{ route.name }}</h3>
				<p><strong>To:</strong> {{ route.destination }}</p>
			</div>
			<div class="ui-block-b">
				<a href="#" data-role="button" id="live-map-button">Live Map</a>
			</div>
		</fieldset>
		
	  {% if opposite_route %}
		<a href="/route/?id={{ opposite_route.id }}" data-role="button" 
			class="opposite_route_button">
			Opposite Direction
		</a>
	  {% else %}
		<a href="#" data-role="button" class="ui-disabled" 
		  class="opposite_route_button">
			No Opposite Line
		</a>
	  {% endif %}
		<br />
		
		<div id="left-column">
			<!-- stops list -->
			<ul data-role="listview">
				<li data-role="list-divider">
					Stop Location
				</li>
	      {% for stop in stops %}
		  	<li>
		  	  <a href="/stop/?id={{ stop.id }}"><span class="word-wrap">
						{{ stop.name }}</span></a>
		  	</li>
	    	{% endfor %}
			</ul>
		</div>
			
		<!-- times table -->
		<div id="right-column">
			
			<!--prev/next buttons -->
			<fieldset class="ui-grid-a">
				<div class="ui-block-a">
					<a id="prev-column" href="#" 
						class="table-nav-button"> < </a>
				</div>
				<div class="ui-block-b">
					<a id="next-column" href="#"
					 class="table-nav-button"> > </a>
				</div>
			</fieldset>
			
			<div class="table-container">
				<table id="time-table">
					{% for i in "xxx" %}
					<tr>
						{% for i in "xxx" %}
						<td>
							3:45 pm
						</td>
						{% endfor %}
					</tr>
					{% endfor %}
				</table>
			</div>
  </div>
	
  <div data-role="footer" data-position="fixed" data-tap-toggle="false">  
    <div class="ui-grid-solo">
      <a href="/route_map/?id={{ route.id }}" data-role="button" 
        data-inline="false" data-theme="c" data-corners="false">
        Live Map of Buses
      </a>
    </div>
  </div>
</div>

<script>
// $(window).load(sizeTheTables());
$(document).ready(function() {
    $('#next-column').click(function(event) {
        event.preventDefault();
        $('.table-container').animate({scrollLeft:'+=152'}, 'fast');        
    });
    $('#prev-column').click(function(event) {
        event.preventDefault();
        $('.table-container').animate({scrollLeft:'-=152'}, 'fast');        
    });
});

function sizeTheTables() {
	var numSchedules = 3;
	var rightColumn = document.getElementById("right-column");
	var tableWidth = rightColumn.offsetWidth;
	$("#time-table").width(tableWidth * numSchedules);
	$("#time-table td").width(tableWidth);
}
</script>
{% endblock %}